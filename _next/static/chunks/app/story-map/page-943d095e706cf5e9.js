(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{10255:(e,t,a)=>{"use strict";function n(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return n}}),a(95155),a(47650),a(85744),a(20589)},17828:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,a(64054).createAsyncLocalStorage)()},24357:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},35893:(e,t,a)=>{Promise.resolve().then(a.bind(a,47652))},36645:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let n=a(88229)._(a(67357));function r(e,t){var a;let r={};"function"==typeof e&&(r.loader=e);let o={...r,...t};return(0,n.default)({...o,modules:null==(a=o.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},40968:(e,t,a)=>{"use strict";a.d(t,{b:()=>s});var n=a(12115),r=a(63655),o=a(95155),l=n.forwardRef((e,t)=>(0,o.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var s=l},47652:(e,t,a)=>{"use strict";a.d(t,{default:()=>k});var n=a(95155),r=a(75269),o=a(30285),l=a(85057),s=a(88539),i=a(79524),c=a(91540),d=a(74311),u=a(19946);let p=(0,u.A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var f=a(91788),h=a(5196),y=a(38164);let m=(0,u.A)("arrow-down-from-line",[["path",{d:"M19 3H5",key:"1236rx"}],["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m6 15 6 6 6-6",key:"h15q88"}]]),g=(0,u.A)("arrow-up-from-line",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]),x=(0,u.A)("square-plus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var v=a(55028),b=a(12115);let j=(0,v.default)(()=>Promise.all([a.e(309),a.e(973),a.e(855)]).then(a.bind(a,12855)).then(e=>e.StoryMapDnD),{loadableGenerated:{webpack:()=>[12855]},ssr:!1}),w=[{id:"e1",type:"epic",title:"ログイン機能",details:"ユーザーがログインできるようにする",acceptance:"ログイン成功時にダッシュボードへ遷移",priority:"high"},{id:"s1",type:"story",title:"SNSログイン対応",parentId:"e1",details:"GoogleやTwitterなどのSNSアカウントでログインできるようにする",acceptance:"SNSアカウントでログイン成功時にユーザー情報が取得できること",priority:"medium"},{id:"t1",type:"task",title:"Google OAuth",parentId:"s1",details:"GoogleのOAuth認証を実装する",acceptance:"Googleアカウントでログインできること",priority:"high"},{id:"st1",type:"subtask",title:"API連携",parentId:"t1",details:"Google APIと連携してユーザー情報を取得する",acceptance:"ユーザー名とメールアドレスが取得できること",priority:"high"},{id:"s2",type:"story",title:"パスワード再発行",parentId:"e1",details:"ユーザーがパスワードを忘れた場合に再発行できるようにする",acceptance:"メールアドレスに再発行リンクが送信されること",priority:"low"},{id:"e2",type:"epic",title:"プロフィール編集",details:"ユーザーが自分のプロフィールを編集できるようにする",acceptance:"プロフィール編集後に変更内容が保存されること",priority:"medium"},{id:"s3",type:"story",title:"画像アップロード",parentId:"e2",details:"ユーザーがプロフィール画像をアップロードできるようにする",acceptance:"アップロード後に画像が表示されること",priority:"medium"}];function k(){var e,t,a,u;let[v,k]=(0,b.useState)(w),[N,S]=(0,b.useState)(null),A=null!=(e=v.find(e=>e.id===N))?e:null,[O,M]=(0,b.useState)(!1),[_,E]=(0,b.useState)(!1),[C,R]=(0,b.useState)(JSON.stringify(v,null,2)),[L,T]=(0,b.useState)(null);function P(e,t){A&&k(a=>a.map(a=>a.id===A.id?{...a,[e]:t}:a))}return(0,b.useEffect)(()=>{R(JSON.stringify(v,null,2))},[v]),(0,b.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("data");if(e)try{let t=decodeURIComponent(atob(e)),a=JSON.parse(t);Array.isArray(a)&&k(a)}catch(e){}},[]),(0,n.jsx)(i.A,{left:(0,n.jsx)(r.G,{}),centerTitle:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{children:"ユーザーストーリーマップ"}),(0,n.jsxs)(o.$,{size:"sm",variant:"ghost",className:"ml-1",onClick:()=>M(e=>!e),children:[O?(0,n.jsx)(d.A,{}):(0,n.jsx)(p,{}),"JSON確認"]}),(0,n.jsx)(o.$,{size:"sm",variant:"ghost",className:"ml-1",onClick:()=>{let e=new Blob([JSON.stringify(v.map(e=>{var t,a,n;return{...e,details:null!=(t=e.details)?t:"",acceptance:null!=(a=e.acceptance)?a:"",priority:null!=(n=e.priority)?n:""}}),null,2)],{type:"application/json"});(0,c.saveAs)(e,"story-map.json")},children:_?(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(f.A,{}),"JSONエクスポート完了"]}):(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(f.A,{}),"JSONエクスポート"]})}),(0,n.jsxs)(o.$,{size:"sm",variant:"ghost",className:"ml-1",onClick:()=>(function(e){let t=e.filter(e=>"epic"===e.type).map(t=>({...t,stories:e.filter(e=>"story"===e.type&&e.parentId===t.id).map(t=>({...t,tasks:e.filter(e=>"task"===e.type&&e.parentId===t.id).map(t=>({...t,subtasks:e.filter(e=>"subtask"===e.type&&e.parentId===t.id)}))}))})),a=[];t.forEach(e=>a.push(...function e(t){var a,n,r;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l="#".repeat(o),s=null!=(a=t.priority)?a:"未設定",i=null!=(n=t.details)?n:"-",c=null!=(r=t.acceptance)?r:"-",d=["".concat(l," ").concat(t.title," (優先度：").concat(s,")"),"","- 詳細：".concat(i),"- 受け入れ条件：".concat(c),""],u=1===o?"stories":2===o?"tasks":3===o?"subtasks":null;return u&&t[u]&&t[u].forEach(t=>{d.push(...e(t,o+1))}),d}(e,1)));let n=new Blob([a.join("\n")],{type:"text/markdown"});(0,c.saveAs)(n,"story-map.md")})(v),children:[(0,n.jsx)(f.A,{}),"Markdownエクスポート"]}),(0,n.jsx)(o.$,{size:"sm",variant:"ghost",className:"ml-1",onClick:()=>{let e=function(e){let t=btoa(encodeURIComponent(JSON.stringify(e)));return"".concat(window.location.origin).concat(window.location.pathname,"?data=").concat(t)}(v);navigator.clipboard.writeText(e),E(!0),setTimeout(()=>E(!1),2e3)},children:_?(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(h.A,{}),"共有URLコピー完了"]}):(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(y.A,{}),"共有URLコピー（共同作業はできません）"]})})]}),centerContent:(0,n.jsxs)("div",{className:"flex-1 h-full flex flex-col",children:[O&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)(s.T,{className:"font-mono h-56 bg-gray-50 dark:bg-gray-800",value:C,onChange:e=>R(e.target.value)}),(0,n.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,n.jsxs)(o.$,{size:"sm",variant:"ghost",onClick:function(){try{let e=JSON.parse(C);if(!Array.isArray(e))throw Error("配列形式のJSONのみサポートします。");if(!e.every(e=>e.id&&e.type&&e.title))throw Error("id/type/title の各項目が必須です。");k(e),S(null),T(null)}catch(e){T("インポート失敗: "+(e instanceof Error?e.message:String(e)))}},children:[(0,n.jsx)(m,{}),"JSONを反映"]}),(0,n.jsxs)(o.$,{size:"sm",variant:"ghost",onClick:()=>{R(JSON.stringify(v,null,2)),T(null)},children:[(0,n.jsx)(g,{}),"現在のマップの状態にJSONを戻す"]})]}),L&&(0,n.jsx)("div",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:L})]}),(0,n.jsx)(j,{items:v,setItems:k,selected:A,setSelected:e=>S(e?e.id:null)}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)(o.$,{size:"sm",onClick:function(){let e="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"e".concat(Date.now()).concat(Math.floor(1e4*Math.random()));k(t=>[...t,{id:e,type:"epic",title:"タイトル"}])},children:[(0,n.jsx)(x,{}),"カード追加"]})})]}),rightTitle:"カード詳細編集",rightContent:A?(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)("div",{className:"font-bold",children:A.title}),(0,n.jsx)(l.J,{className:"text-sm text-gray-600 dark:text-gray-400",children:"詳細"}),(0,n.jsx)(s.T,{value:null!=(t=A.details)?t:"",placeholder:"詳細を入力",onChange:e=>P("details",e.target.value),className:"h-full font-mono shadow-none focus:ring-0 focus:border-gray-300 dark:focus:border-gray-600 dark:bg-gray-800 dark:text-gray-200"}),(0,n.jsx)(l.J,{className:"text-sm text-gray-600 dark:text-gray-400",children:"受け入れ条件"}),(0,n.jsx)(s.T,{value:null!=(a=A.acceptance)?a:"",placeholder:"受け入れ条件",onChange:e=>P("acceptance",e.target.value),className:"h-full font-mono shadow-none focus:ring-0 focus:border-gray-300 dark:focus:border-gray-600 dark:bg-gray-800 dark:text-gray-200"}),(0,n.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"優先度"}),(0,n.jsxs)("select",{className:"border rounded p-1 dark:bg-gray-800 dark:text-gray-200",value:null!=(u=A.priority)?u:"",onChange:e=>P("priority",e.target.value),children:[(0,n.jsx)("option",{value:"",children:"優先度未設定"}),(0,n.jsx)("option",{value:"low",children:"低"}),(0,n.jsx)("option",{value:"medium",children:"中"}),(0,n.jsx)("option",{value:"high",children:"高"})]})]}):(0,n.jsx)("div",{className:"text-gray-400 text-sm pt-10",children:"カードを選択してください"})})}},55028:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var n=a(36645),r=a.n(n)},62146:(e,t,a)=>{"use strict";function n(e){let{reason:t,children:a}=e;return a}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}}),a(45262)},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{bindSnapshot:function(){return l},createAsyncLocalStorage:function(){return o},createSnapshot:function(){return s}});let a=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw a}getStore(){}run(){throw a}exit(){throw a}enterWith(){throw a}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function o(){return r?new r:new n}function l(e){return r?r.bind(e):n.bind(e)}function s(){return r?r.snapshot():function(e,...t){return e(...t)}}},67357:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let n=a(95155),r=a(12115),o=a(62146);function l(e){return{default:e&&"default"in e?e.default:e}}a(10255);let s={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},i=function(e){let t={...s,...e},a=(0,r.lazy)(()=>t.loader().then(l)),i=t.loading;function c(e){let l=i?(0,n.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,c=s?r.Suspense:r.Fragment,d=t.ssr?(0,n.jsxs)(n.Fragment,{children:[null,(0,n.jsx)(a,{...e})]}):(0,n.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(a,{...e})});return(0,n.jsx)(c,{...s?{fallback:l}:{},children:d})}return c.displayName="LoadableComponent",c}},74311:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]])},85057:(e,t,a)=>{"use strict";a.d(t,{J:()=>l});var n=a(95155),r=a(40968);a(12115);var o=a(59434);function l(e){let{className:t,...a}=e;return(0,n.jsx)(r.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},85744:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorageInstance}});let n=a(17828)},88539:(e,t,a)=>{"use strict";a.d(t,{T:()=>d});var n=a(95155),r=a(59434),o=a(5196),l=a(24357),s=a(91788),i=a(54416),c=a(12115);let d=c.forwardRef((e,t)=>{var a;let{className:d,showClearButton:u=!1,showCopyButton:p=!1,showDownloadButton:f=!1,downloadFileName:h="download",downloadFileExtension:y="txt",wrapperClassName:m,value:g,onChange:x,disabled:v,...b}=e,j=void 0!==g,[w,k]=c.useState(null!=(a=b.defaultValue)?a:""),[N,S]=c.useState(!1),[A,O]=c.useState(!1),M=j?g:w,_=async()=>{if(M)try{await navigator.clipboard.writeText(M.toString()),S(!0),setTimeout(()=>S(!1),1e3)}catch(e){}};return(0,n.jsxs)("div",{className:(0,r.cn)("relative",m),children:[(0,n.jsx)("textarea",{className:(0,r.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",d),ref:t,value:M,onChange:e=>{j||k(e.target.value),null==x||x(e)},disabled:v,...b}),(u||p||f)&&M&&!v&&(0,n.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 z-10",children:[p&&(0,n.jsx)("button",{type:"button",onClick:_,className:(0,r.cn)("text-gray-400 hover:text-blue-600 dark:hover:text-blue-300 p-1 rounded transition",N&&"text-green-500"),tabIndex:-1,"aria-label":"コピー",children:N?(0,n.jsx)(o.A,{className:"w-4 h-4"}):(0,n.jsx)(l.A,{className:"w-4 h-4"})}),f&&(0,n.jsx)("button",{type:"button",onClick:()=>{if(!M)return;let e=new Blob(["string"==typeof M?M:Array.isArray(M)?M.join("\n"):String(M)],{type:"text/plain;charset=utf-8"}),t=(y||"txt").replace(/^\./,""),a="".concat(h||"download",".").concat(t),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),O(!0),setTimeout(()=>O(!1),1200)},className:(0,r.cn)("text-gray-400 hover:text-teal-600 dark:hover:text-teal-300 p-1 rounded transition",A&&"text-green-500"),tabIndex:-1,"aria-label":"ダウンロード（".concat(h,".").concat(y,"）"),children:A?(0,n.jsx)(o.A,{className:"w-4 h-4"}):(0,n.jsx)(s.A,{className:"w-4 h-4"})}),u&&(0,n.jsx)("button",{type:"button",onClick:()=>{j||k(""),j&&x&&x({...new Event("change"),target:{value:""}})},className:"text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 p-1 rounded",tabIndex:-1,"aria-label":"入力をクリア",children:(0,n.jsx)(i.A,{className:"w-4 h-4"})})]})]})});d.displayName="Textarea"},91540:function(e,t,a){var n,r;void 0===(r="function"==typeof(n=function(){"use strict";function t(e,t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,a)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a.g&&a.g.global===a.g?a.g:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,a,l){var s=o.URL||o.webkitURL,i=document.createElement("a");i.download=a=a||e.name||"download",i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?r(i):n(i.href)?t(e,a,l):r(i,i.target="_blank")):(i.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(i.href)},4e4),setTimeout(function(){r(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,o){if(a=a||e.name||"download","string"!=typeof e){var l;navigator.msSaveOrOpenBlob((void 0===(l=o)?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e),a)}else if(n(e))t(e,a,o);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){r(s)})}}:function(e,a,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return t(e,a,n);var s="application/octet-stream"===e.type,i=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&i||l)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},d.readAsDataURL(e)}else{var u=o.URL||o.webkitURL,p=u.createObjectURL(e);r?r.location=p:location.href=p,r=null,setTimeout(function(){u.revokeObjectURL(p)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s})?n.apply(t,[]):n)||(e.exports=r)},91788:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[816,608,441,684,358],()=>t(35893)),_N_E=e.O()}]);