(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{5893:(e,t,a)=>{Promise.resolve().then(a.bind(a,3685))},8003:function(e,t,a){var n,r,l;r=[],void 0!==(l="function"==typeof(n=function(){"use strict";function t(e,t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){i(n.response,t,a)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a.g&&a.g.global===a.g?a.g:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,a,o){var i=l.URL||l.webkitURL,s=document.createElement("a");a=a||e.name||"download",s.download=a,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?r(s):n(s.href)?t(e,a,o):r(s,s.target="_blank")):(s.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){r(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,l){if(a=a||e.name||"download","string"!=typeof e){var o;navigator.msSaveOrOpenBlob((void 0===(o=l)?o={autoBom:!1}:"object"!=typeof o&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e),a)}else if(n(e))t(e,a,l);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){r(i)})}}:function(e,a,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return t(e,a,n);var i="application/octet-stream"===e.type,s=/constructor/i.test(l.HTMLElement)||l.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||i&&s||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},c.readAsDataURL(e)}else{var u=l.URL||l.webkitURL,p=u.createObjectURL(e);r?r.location=p:location.href=p,r=null,setTimeout(function(){u.revokeObjectURL(p)},4e4)}});l.saveAs=i.saveAs=i,e.exports=i})?n.apply(t,r):n)&&(e.exports=l)},3920:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(7401).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},4857:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(7401).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},314:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(7401).A)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]])},1956:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let n=a(306)._(a(580));function r(e,t){var a;let r={};"function"==typeof e&&(r.loader=e);let l={...r,...t};return(0,n.default)({...l,modules:null==(a=l.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9827:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let n=a(3719);function r(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return a}},580:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let n=a(5155),r=a(2115),l=a(9827),o=a(9214);function i(e){return{default:e&&"default"in e?e.default:e}}let s={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...s,...e},a=(0,r.lazy)(()=>t.loader().then(i)),d=t.loading;function c(e){let i=d?(0,n.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,c=s?r.Suspense:r.Fragment,u=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,n.jsx)(a,{...e})]}):(0,n.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(a,{...e})});return(0,n.jsx)(c,{...s?{fallback:i}:{},children:u})}return c.displayName="LoadableComponent",c}},9214:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return i}});let n=a(5155),r=a(7650),l=a(5861),o=a(8284);function i(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=l.workAsyncStorage.getStore();if(void 0===a)return null;let i=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files;i.push(...t)}}return 0===i.length?null:(0,n.jsx)(n.Fragment,{children:i.map(e=>{let t=a.assetPrefix+"/_next/"+(0,o.encodeURIPath)(e);return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,r.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},3685:(e,t,a)=>{"use strict";a.d(t,{default:()=>w});var n=a(5155),r=a(8818),l=a(3312),o=a(8986),i=a(6754),s=a(6693),d=a(8003),c=a(314),u=a(7401);let p=(0,u.A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var f=a(4857);let h=(0,u.A)("arrow-down-from-line",[["path",{d:"M19 3H5",key:"1236rx"}],["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m6 15 6 6 6-6",key:"h15q88"}]]),y=(0,u.A)("arrow-up-from-line",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]),m=(0,u.A)("square-plus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var v=a(1956),x=a.n(v),g=a(2115);let b=x()(()=>Promise.all([a.e(309),a.e(714),a.e(742)]).then(a.bind(a,8742)).then(e=>e.StoryMapDnD),{loadableGenerated:{webpack:()=>[8742]},ssr:!1}),j=[{id:"e1",type:"epic",title:"ログイン機能",details:"ユーザーがログインできるようにする",acceptance:"ログイン成功時にダッシュボードへ遷移",priority:"high"},{id:"s1",type:"story",title:"SNSログイン対応",parentId:"e1",details:"GoogleやTwitterなどのSNSアカウントでログインできるようにする",acceptance:"SNSアカウントでログイン成功時にユーザー情報が取得できること",priority:"medium"},{id:"t1",type:"task",title:"Google OAuth",parentId:"s1",details:"GoogleのOAuth認証を実装する",acceptance:"Googleアカウントでログインできること",priority:"high"},{id:"st1",type:"subtask",title:"API連携",parentId:"t1",details:"Google APIと連携してユーザー情報を取得する",acceptance:"ユーザー名とメールアドレスが取得できること",priority:"high"},{id:"s2",type:"story",title:"パスワード再発行",parentId:"e1",details:"ユーザーがパスワードを忘れた場合に再発行できるようにする",acceptance:"メールアドレスに再発行リンクが送信されること",priority:"low"},{id:"e2",type:"epic",title:"プロフィール編集",details:"ユーザーが自分のプロフィールを編集できるようにする",acceptance:"プロフィール編集後に変更内容が保存されること",priority:"medium"},{id:"s3",type:"story",title:"画像アップロード",parentId:"e2",details:"ユーザーがプロフィール画像をアップロードできるようにする",acceptance:"アップロード後に画像が表示されること",priority:"medium"}];function w(){var e,t,a,u;let[v,x]=(0,g.useState)(j),[w,k]=(0,g.useState)(null),N=null!==(e=v.find(e=>e.id===w))&&void 0!==e?e:null,[S,A]=(0,g.useState)(!1),[M,O]=(0,g.useState)(JSON.stringify(v,null,2)),[C,E]=(0,g.useState)(null);function R(e,t){N&&x(a=>a.map(a=>a.id===N.id?{...a,[e]:t}:a))}return(0,g.useEffect)(()=>{O(JSON.stringify(v,null,2))},[v]),(0,n.jsx)(s.A,{left:(0,n.jsx)(r.G,{}),centerTitle:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{children:"ユーザーストーリーマップ"}),(0,n.jsxs)(l.$,{size:"sm",variant:"ghost",className:"ml-1",onClick:()=>A(e=>!e),children:[S?(0,n.jsx)(c.A,{}):(0,n.jsx)(p,{}),"JSON確認"]}),(0,n.jsxs)(l.$,{size:"sm",variant:"ghost",className:"ml-1",onClick:()=>(function(e){let t=new Blob([JSON.stringify(e.map(e=>{var t,a,n;return{...e,details:null!==(t=e.details)&&void 0!==t?t:"",acceptance:null!==(a=e.acceptance)&&void 0!==a?a:"",priority:null!==(n=e.priority)&&void 0!==n?n:""}}),null,2)],{type:"application/json"});(0,d.saveAs)(t,"story-map.json")})(v),children:[(0,n.jsx)(f.A,{}),"JSONエクスポート"]}),(0,n.jsxs)(l.$,{size:"sm",variant:"ghost",className:"ml-1",onClick:()=>(function(e){let t=e.filter(e=>"epic"===e.type).map(t=>({...t,stories:e.filter(e=>"story"===e.type&&e.parentId===t.id).map(t=>({...t,tasks:e.filter(e=>"task"===e.type&&e.parentId===t.id).map(t=>({...t,subtasks:e.filter(e=>"subtask"===e.type&&e.parentId===t.id)}))}))})),a=[];t.forEach(e=>a.push(...function e(t){var a,n,r;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o="#".repeat(l),i=null!==(a=t.priority)&&void 0!==a?a:"未設定",s=null!==(n=t.details)&&void 0!==n?n:"-",d=null!==(r=t.acceptance)&&void 0!==r?r:"-",c=["".concat(o," ").concat(t.title," (優先度：").concat(i,")"),"","- 詳細：".concat(s),"- 受け入れ条件：".concat(d),""],u=1===l?"stories":2===l?"tasks":3===l?"subtasks":null;return u&&t[u]&&t[u].forEach(t=>{c.push(...e(t,l+1))}),c}(e,1)));let n=new Blob([a.join("\n")],{type:"text/markdown"});(0,d.saveAs)(n,"story-map.md")})(v),children:[(0,n.jsx)(f.A,{}),"Markdownエクスポート"]})]}),centerContent:(0,n.jsxs)("div",{className:"flex-1 h-full flex flex-col",children:[S&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)(i.T,{className:"font-mono h-56 bg-gray-50 dark:bg-gray-800",value:M,onChange:e=>O(e.target.value)}),(0,n.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,n.jsxs)(l.$,{size:"sm",variant:"ghost",onClick:function(){try{let e=JSON.parse(M);if(!Array.isArray(e))throw Error("配列形式のJSONのみサポートします。");if(!e.every(e=>e.id&&e.type&&e.title))throw Error("id/type/title の各項目が必須です。");x(e),k(null),E(null)}catch(e){E("インポート失敗: "+(e instanceof Error?e.message:String(e)))}},children:[(0,n.jsx)(h,{}),"JSONを反映"]}),(0,n.jsxs)(l.$,{size:"sm",variant:"ghost",onClick:()=>{O(JSON.stringify(v,null,2)),E(null)},children:[(0,n.jsx)(y,{}),"現在のマップの状態にJSONを戻す"]})]}),C&&(0,n.jsx)("div",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:C})]}),(0,n.jsx)(b,{items:v,setItems:x,selected:N,setSelected:e=>k(e?e.id:null)}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)(l.$,{size:"sm",onClick:function(){let e="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"e".concat(Date.now()).concat(Math.floor(1e4*Math.random()));x(t=>[...t,{id:e,type:"epic",title:"タイトル"}])},children:[(0,n.jsx)(m,{}),"カード追加"]})})]}),rightTitle:"カード詳細編集",rightContent:N?(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)("div",{className:"font-bold",children:N.title}),(0,n.jsx)(o.J,{className:"text-sm text-gray-600 dark:text-gray-400",children:"詳細"}),(0,n.jsx)(i.T,{value:null!==(t=N.details)&&void 0!==t?t:"",placeholder:"詳細を入力",onChange:e=>R("details",e.target.value),className:"h-full font-mono shadow-none focus:ring-0 focus:border-gray-300 dark:focus:border-gray-600 dark:bg-gray-800 dark:text-gray-200"}),(0,n.jsx)(o.J,{className:"text-sm text-gray-600 dark:text-gray-400",children:"受け入れ条件"}),(0,n.jsx)(i.T,{value:null!==(a=N.acceptance)&&void 0!==a?a:"",placeholder:"受け入れ条件",onChange:e=>R("acceptance",e.target.value),className:"h-full font-mono shadow-none focus:ring-0 focus:border-gray-300 dark:focus:border-gray-600 dark:bg-gray-800 dark:text-gray-200"}),(0,n.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"優先度"}),(0,n.jsxs)("select",{className:"border rounded p-1 dark:bg-gray-800 dark:text-gray-200",value:null!==(u=N.priority)&&void 0!==u?u:"",onChange:e=>R("priority",e.target.value),children:[(0,n.jsx)("option",{value:"",children:"優先度未設定"}),(0,n.jsx)("option",{value:"low",children:"低"}),(0,n.jsx)("option",{value:"medium",children:"中"}),(0,n.jsx)("option",{value:"high",children:"高"})]})]}):(0,n.jsx)("div",{className:"text-gray-400 text-sm pt-10",children:"カードを選択してください"})})}},8986:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var n=a(5155),r=a(6195);a(2115);var l=a(1567);function o(e){let{className:t,...a}=e;return(0,n.jsx)(r.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},6754:(e,t,a)=>{"use strict";a.d(t,{T:()=>c});var n=a(5155),r=a(1567),l=a(8867),o=a(3920),i=a(4857),s=a(767),d=a(2115);let c=d.forwardRef((e,t)=>{var a;let{className:c,showClearButton:u=!1,showCopyButton:p=!1,showDownloadButton:f=!1,downloadFileName:h="download",downloadFileExtension:y="txt",wrapperClassName:m,value:v,onChange:x,disabled:g,...b}=e,j=void 0!==v,[w,k]=d.useState(null!==(a=b.defaultValue)&&void 0!==a?a:""),[N,S]=d.useState(!1),[A,M]=d.useState(!1),O=j?v:w,C=async()=>{if(O)try{await navigator.clipboard.writeText(O.toString()),S(!0),setTimeout(()=>S(!1),1e3)}catch(e){}};return(0,n.jsxs)("div",{className:(0,r.cn)("relative",m),children:[(0,n.jsx)("textarea",{className:(0,r.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",c),ref:t,value:O,onChange:e=>{j||k(e.target.value),null==x||x(e)},disabled:g,...b}),(u||p||f)&&O&&!g&&(0,n.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 z-10",children:[p&&(0,n.jsx)("button",{type:"button",onClick:C,className:(0,r.cn)("text-gray-400 hover:text-blue-600 dark:hover:text-blue-300 p-1 rounded transition",N&&"text-green-500"),tabIndex:-1,"aria-label":"コピー",children:N?(0,n.jsx)(l.A,{className:"w-4 h-4"}):(0,n.jsx)(o.A,{className:"w-4 h-4"})}),f&&(0,n.jsx)("button",{type:"button",onClick:()=>{if(!O)return;let e=new Blob(["string"==typeof O?O:Array.isArray(O)?O.join("\n"):String(O)],{type:"text/plain;charset=utf-8"}),t=(y||"txt").replace(/^\./,""),a="".concat(h||"download",".").concat(t),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),M(!0),setTimeout(()=>M(!1),1200)},className:(0,r.cn)("text-gray-400 hover:text-teal-600 dark:hover:text-teal-300 p-1 rounded transition",A&&"text-green-500"),tabIndex:-1,"aria-label":"ダウンロード（".concat(h,".").concat(y,"）"),children:A?(0,n.jsx)(l.A,{className:"w-4 h-4"}):(0,n.jsx)(i.A,{className:"w-4 h-4"})}),u&&(0,n.jsx)("button",{type:"button",onClick:()=>{j||k(""),j&&x&&x({...new Event("change"),target:{value:""}})},className:"text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 p-1 rounded",tabIndex:-1,"aria-label":"入力をクリア",children:(0,n.jsx)(s.A,{className:"w-4 h-4"})})]})]})});c.displayName="Textarea"},6195:(e,t,a)=>{"use strict";a.d(t,{b:()=>i});var n=a(2115),r=a(3360),l=a(5155),o=n.forwardRef((e,t)=>(0,l.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var i=o}},e=>{var t=t=>e(e.s=t);e.O(0,[882,502,441,517,358],()=>t(5893)),_N_E=e.O()}]);